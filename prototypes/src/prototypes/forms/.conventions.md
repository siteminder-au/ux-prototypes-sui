# Dynamic Form Prototype Conventions

This document captures the established patterns and conventions for creating new form slides in the dynamic-form prototype.

## File Structure

```
dynamic-form/
├── slides/
│   ├── Slide1.vue              # Main gap spacing implementation
│   ├── Slide2.vue              # Additional forms (to be created)
│   └── ...
├── styles/
│   ├── index.scss              # Main import hub - imports all modules
│   ├── sui-overrides.scss      # SUI component overrides with :deep()
│   ├── form-patterns.scss      # Reusable form content patterns
│   ├── gap-spacing.scss        # Hybrid spacing system (toggleable)
│   ├── proto-slide-layout.scss # Slideshow container layout
│   └── proto-settings-panel.scss # Settings panel styles
├── components/
│   ├── DisplaySettings.vue     # Shared settings panel content
│   ├── GridOverlay.vue         # Grid visualization overlay
│   └── PrototypeSettings.vue   # Settings modal shell
├── composables/
│   └── useDisplaySettings.js   # Shared display state
└── SlideHeader.vue             # Slide navigation header

```

## Spacing System (Hybrid Gap + Margin)

Located in `styles/gap-spacing.scss` - toggleable by commenting import in `index.scss`

**Variables:**
- `$gap-between-form-groups: 40px` - Space between major form sections
- `$margin-above-and-below-form-headings: 8px` - Vertical margins for headings
- `$gap-between-form-rows: 16px` - Space between form fields in a group

**Two-Phase System:**
1. **Phase 1**: Global resets - Removes all margins/padding from containers, headings, inputs
2. **Phase 2**: Apply spacing - Uses flexbox `gap` for containers, `margin` for headings

## Form Heading System (4 Levels)

Semantic HTML with visual styling classes (scoped to `.sm-form`):

| Level | Tag | Class | Use Case | Style |
|-------|-----|-------|----------|-------|
| 1 | `h2` | `.form-heading-1` | Form Group | 18px, 600 weight, uppercase, letter-spacing |
| 2 | `h3` | `.form-heading-2` | Major Subsections | 15px, 600 weight, normal case |
| 3 | `h4` | `.form-heading-3` | Minor Subsections | 13px, 600 weight, uppercase |
| 4 | `h5` | `.form-heading-4` | Component Titles | 13px, 600 weight, normal case |

**Example:**
```vue
<SmFormGroup>
  <h2 class="form-heading-1">Rate Plan Details</h2>
  <SmInput label="Plan name" v-model="planName" />

  <h3 class="form-heading-2">Pricing</h3>
  <SmInput label="Base rate" v-model="baseRate" />
</SmFormGroup>
```

## Slide Structure Template

```vue
<template>
  <div>
    <SlideHeader
      :current-slide="0"
      :total-slides="1"
      slide-title="Form Name"
      :slide-titles="{ 0: 'Form Name' }"
      :is-first-slide="true"
      :is-last-slide="true"
      @navigate="handleNavigate"
      @go-to-slide="handleGoToSlide"
    />

    <div class="slideshow-container">
      <div class="slide-content">
        <div class="slide-wrapper" :class="{ 'full-width': fullWidthForm }">

          <!-- LEFT: Reference/Before (hidden when full-width) -->
          <div v-if="!fullWidthForm" class="slide-left">
            <div class="container-header">Before / Reference</div>
            <div class="container-content">
              <img src="path/to/reference.png" alt="Reference form" />
            </div>
          </div>

          <!-- RIGHT: Live Form Implementation -->
          <div class="slide-right">
            <div class="container-header">Proposed</div>
            <div class="container-content">
              <div class="form-content-wrapper" :class="{ 'show-backgrounds': showContainerBackgrounds }">

                <SmForm>
                  <!-- Form groups go here -->
                  <SmFormGroup>
                    <h2 class="form-heading-1">Section Title</h2>
                    <!-- Form fields -->
                  </SmFormGroup>
                </SmForm>

              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Settings Panel -->
    <PrototypeSettings>
      <DisplaySettings />
    </PrototypeSettings>

    <!-- Grid Overlay -->
    <GridOverlay v-if="showGridOverlay" />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import SlideHeader from '../SlideHeader.vue'
import PrototypeSettings from '../components/PrototypeSettings.vue'
import DisplaySettings from '../components/DisplaySettings.vue'
import GridOverlay from '../components/GridOverlay.vue'
import { useDisplaySettings } from '../composables/useDisplaySettings.js'

const { showGridOverlay, showContainerBackgrounds, fullWidthForm } = useDisplaySettings()

// Form data refs
const formData = ref({
  // Your form fields here
})

const handleNavigate = (direction) => {
  // Navigation logic
}

const handleGoToSlide = (slideNum) => {
  // Navigation logic
}
</script>

<style scoped lang="scss">
@import '../styles/index.scss';
</style>
```

## Vue Component Patterns

### Style Organization
- **NEVER** put styles directly in Vue `<style>` blocks
- Use `<style scoped lang="scss">` with only `@import '../styles/index.scss';`
- All actual styles go in SCSS modules
- Use `:deep()` for penetrating component boundaries in SCSS files

### Imports
```vue
<script setup>
import { ref } from 'vue'
import SlideHeader from '../SlideHeader.vue'
import PrototypeSettings from '../components/PrototypeSettings.vue'
import DisplaySettings from '../components/DisplaySettings.vue'
import GridOverlay from '../components/GridOverlay.vue'
import { useDisplaySettings } from '../composables/useDisplaySettings.js'
</script>
```

### Display Settings
Always use shared composable:
```javascript
const { showGridOverlay, showContainerBackgrounds, fullWidthForm } = useDisplaySettings()
```

## SUI Component Usage

### Form Structure
```vue
<SmForm>
  <SmFormGroup>
    <h2 class="form-heading-1">Section Title</h2>
    <SmInput label="Field label" v-model="value" />
  </SmFormGroup>
</SmForm>
```

### Common Components
- `<SmInput>` - Text inputs
- `<SmDatePicker>` - Date selection
- `<SmSelect>` - Dropdowns
- `<SmCheckbox>` - Single checkboxes (use standalone, not in checkbox-group)
- `<SmRadioGroup>` - Radio button groups
- `<SmTextarea>` - Multi-line text
- `<SmMedia>` - File/image uploads
- `<SmDrawer>` - Side panels

### Helper Messages
Use `.form-helper-message` class for informational text:
```vue
<p class="form-helper-message">
  Helper text goes here
</p>
```

## Common Patterns

### Conditional Sections
```vue
<div v-if="condition" class="conditional-form-section">
  <SmFormGroup>
    <!-- Conditional content -->
  </SmFormGroup>
</div>
```

### Sortable Lists
```vue
<div class="selling-points-list">
  <div v-for="(item, index) in items" :key="index" class="selling-point-item">
    <!-- Item content -->
  </div>
</div>
```

### Derived Fields / Grouped Inputs
```vue
<div class="derived-rate-fields">
  <SmInput label="Field 1" v-model="field1" />
  <SmInput label="Field 2" v-model="field2" />
</div>
```

## SCSS Module Guidelines

### sui-overrides.scss
For SUI component customizations - always use `:deep()`:
```scss
:deep(.sm-form-group) {
  margin-bottom: 36px;
  gap: 5px;
}
```

### form-patterns.scss
For reusable form content patterns:
```scss
.error-list {
  margin: 0;
  padding-left: 20px;
}

.derived-rate-fields {
  display: flex;
  flex-direction: column;
  gap: 5px;
}
```

### Slide-Specific Styles
If absolutely necessary, add to `form-patterns.scss` with comment:
```scss
/* ============================================
   SLIDE2-SPECIFIC STYLES
   Currently used by Slide2, may be adopted by other slides
   ============================================ */
```

## When Creating New Slides from Production Images

### Analysis Checklist
1. **Identify form structure:**
   - What are the main sections? (These become `<SmFormGroup>` with h2 headings)
   - What are subsections? (Use h3, h4, h5 as appropriate)
   - What fields are there? (Map to SUI components)

2. **Identify patterns:**
   - Conditional fields
   - Repeating sections
   - Related field groups
   - Helper text
   - Validation rules

3. **Determine spacing needs:**
   - Use gap-spacing system unless specific deviation needed
   - Note any custom spacing requirements

4. **Component selection:**
   - Text input → `<SmInput>`
   - Dropdown → `<SmSelect>`
   - Date → `<SmDatePicker>`
   - Checkbox → `<SmCheckbox>` (standalone, not checkbox-group)
   - Radio buttons → `<SmRadioGroup>`
   - File upload → `<SmMedia>`

### Generation Process
1. Create new `SlideX.vue` file using template above
2. Structure content with semantic headings (h2, h3, h4, h5)
3. Map fields to appropriate SUI components
4. Add form data refs with realistic defaults
5. Implement conditional logic as needed
6. Add any slide-specific patterns to `form-patterns.scss`
7. Test with gap-spacing enabled
8. Verify with grid overlay and debug backgrounds

## Development Workflow

### Running the App
```bash
cd prototypes
npm run dev
```
Dev server runs at: http://localhost:3001/

### Settings Panel
- Press tilde (~) key to open/close
- Toggle grid overlay (40px spacing visualization)
- Toggle debug backgrounds (yellow highlight for form containers)
- Toggle full-width form (hides left reference panel)

### Hot Reload
All changes to Vue files and SCSS files reload automatically

## Key Design Principles

1. **Semantic HTML First** - Use correct heading tags (h2-h5), then apply visual classes
2. **Centralized Styles** - No styles in Vue files, all in SCSS modules
3. **Shared State** - Use composables for cross-slide functionality
4. **Toggleable Systems** - Gap spacing can be enabled/disabled via import
5. **Component Reuse** - DisplaySettings, GridOverlay, PrototypeSettings are shared
6. **Visual Flexibility** - Heading levels are semantic, classes control appearance
7. **Progressive Enhancement** - Start with basic form, add complexity as needed

## Common Gotchas

1. **Scoped styles don't work without :deep()** - Always use `:deep()` in SCSS modules
2. **Gap spacing resets everything** - Phase 1 removes all margins, Phase 2 applies new spacing
3. **Checkbox groups vs standalone** - Use standalone `<SmCheckbox>` for single checkboxes
4. **Heading resets** - All headings are reset to inherit, must use form-heading classes
5. **Import order matters** - sui-overrides.scss must come before gap-spacing.scss

## Reference Files

- **Best example slide**: `slides/Slide1.vue`
- **Spacing system**: `styles/gap-spacing.scss`
- **Heading system**: `styles/sui-overrides.scss` (lines 48-104)
- **Layout system**: `styles/proto-slide-layout.scss`
- **Form patterns**: `styles/form-patterns.scss`
