import {Canvas, Meta, Story } from '@storybook/addon-docs'
import { SuiStorybookPageLabel, SuiStorybookTitle } from '@/components'
import typesUserInputFieldErrors from './images/types-user-input-field-errors.png'
import typesUserInputErrorSummary from './images/types-user-input-error-summary.png'
import typesSecurityRestriction from './images/types-security-restriction.png'
import typesAppGlobalError from './images/types-app-global-error.png'
import componentBanner from './images/components-to-use-banner.png'
import componentHelpCard from './images/components-to-use-help-card.png'
import componentInput from './images/components-to-use-input.png'
import componentToast from './images/components-to-use-toast.png'
import componentErrorPage from './images/components-to-use-404-error-page.png'

<style>
  {`
    .img-padding {
      padding-top: 16px;
      padding-bottom: 16px;
    }

  `}
</style>

<Meta title="Design patterns/Error patterns/Types and components" />

<SuiStorybookPageLabel>Design patterns</SuiStorybookPageLabel>

<SuiStorybookTitle>
  <h1>Error patterns</h1>
  <p>Errors offer users valuable feedback within a specific context, enabling them to address failures and prevent potential issues down the line.</p>
</SuiStorybookTitle>

- [User input errors](#user-input-errors)
- [Security restriction errors](#security-restriction-errors)
- [Application and Global errors](#application-and-global-errors)
- [Components to use](#components-to-use)


## User input errors

### Field errors
<table>
    <tbody>
     <tr>
       <td><strong>Error hierarchy</strong> </td>
        <td>Component</td>
      </tr>
    </tbody>
  </table>
  <br />
Errors are displayed directly under the field that contains invalid input. This approach provides users with immediate feedback about their input, making it easier for them to identify and correct errors.
<img src={typesUserInputFieldErrors} className="img-padding" alt="Input field error state and checklist error state validations." width="540" />

  #### When to use
  - <strong>Missing or incomplete information:</strong> Users may overlook required fields or fail to provide all the necessary details for a specific task or form. The error message will guide the applicant to complete the missing information.
  - <strong>A user enters an incorrect format in the input field:</strong> If the user enters information in a format that does not match the required criteria (i.e. invalid email address or phone number with the wrong format)
  - User leaves a <strong> required checkbox or radio button group unselected.</strong>
  - <strong>Invalid values or selections:</strong> Users might input values or make choices that don't align with the permitted range or available options. For instance, selecting an unavailable time slot or choosing an irrelevant option in a given context.
  - <strong>Syntax or spelling mistakes:</strong> Users may make errors in spelling or grammar, leading to issues with text inputs or search queries.


### Error summary
<table>
    <tbody>
     <tr>
       <td><strong>Error hierarchy</strong> </td>
        <td>Container-level, Page-level</td>
      </tr>
    </tbody>
  </table>
  <br />
An error summary is a notification on the page that informs users when their action has not been successful and provides a concise overview of the specific fields where errors occurred.

This summary is essential for assisting users in identifying all the issues, especially when using screen-readers or zoom-tools, or when dealing with lengthy forms.

Each error is listed in a bullet-point format, with each item serving as a clickable link to the specific field that needs attention.

<strong>Guidelines:</strong>

- Limit error list on the help card to 5 specific bullet point errors and if there are more errors, use <strong>“[#] more errors”</strong> on the last bullet point. . (i.e 2 more errors)

<img src={typesUserInputErrorSummary} className="img-padding" alt="Error summary on top of input fields with errors." />

  #### When to use
  - When users submit a form with multiple errors
  - When dealing with lengthy forms or multi-step processes
  - <strong>Inline Errors are Insufficient:</strong> While inline error messages provide real-time feedback for individual fields, an error summary complements this by presenting a higher-level overview of all errors.
  - <strong>Mobile and Responsive Design:</strong> On smaller screens, it may be more efficient to display an error summary rather than attempting to show inline errors for every field.
  - <strong>Logical errors:</strong> Users might perform actions or enter inputs that contradict the system's logic or rules, resulting in errors or unexpected behavior. For example, trying to proceed without completing a necessary step or attempting an action that's not permitted in the current state.


## Security restriction errors
<table>
<tbody>
  <tr>
 <td><strong>Error hierarchy</strong> </td>
  <td>Page-level</td>
   </tr>
</tbody>
</table>

Page level errors are not tied to specific components. This could happen when multiple errors are in a page or access is denied to a specific user.
<img src={typesSecurityRestriction} className="img-padding" alt="Unauthorised access error page as sample of security restriction error." />

#### When to use
  - <strong> Access Denied </strong><br />When a user tries to access a particular page, resource, or feature, but their role or permissions do not grant them the necessary access.
  - <strong>Unauthorized Action </strong><br />When a user attempts to perform an action that requires specific privileges (e.g., editing, deleting, or accessing certain data) but is not authorized to do so.


## Application and Global errors
<table>
<tbody>
  <tr>
 <td><strong>Error hierarchy</strong> </td>
  <td>Page-level</td>
   </tr>
</tbody>
</table>

Application errors occur independent of user input thus, using page-level errors. They are issues that occur within the application for different reasons, such as bugs, unforeseen user inputs, system failures, or compatibility problems.
<img src={typesAppGlobalError} className="img-padding" alt="Toast example of date cannot be retrieved as sample for an app error and an error page with An error occurred message as sample for global error." />

#### When to use
  - <strong> Integration Errors </strong><br />Problems occurring when different components or external services fail to interact correctly within the application.
  - <strong>Network Errors </strong><br />Issues arising from problems with network connections, like timeouts or server unavailability.
  - <strong>Internal Server errors </strong>


## Components to use

### Banners
<img src={componentBanner} className="img-padding" alt="Banner component used to communicate subscription renewal." />

<strong>Use for:</strong>

- Application errors
- Global errors

<strong>Banners communicate:</strong>

- An error that targets either a specific section of a page or affects the entire page.
- A summary of multiple errors on the page, which also incorporates inline error messages when utilized for form validation.
- Operation failures with multiple details or when a form submission lacks several required fields.
- Help card error messages can result from a user action or at a system level.


### Help card
<img src={componentHelpCard} className="img-padding" alt="Help card as an example for error summary." width="640" />

<strong>Use for:</strong>

- User input errors - error summaries
- Application errors

<strong>Help cards communicate:</strong>

- An error that targets either a specific section of a page or affects the entire page.
- A summary of multiple errors on the page, which also incorporates inline error messages when utilized for form validation.
- Operation failures with multiple details or when a form submission lacks several required fields.
- Help card error messages can result from a user action or at a system level.

### Input field - validation
<img src={componentInput} className="img-padding" alt="Input validation sample for a minimum rate with error message that rate should be greater than lowest rate of 10." width="340" />

<strong>Use for:</strong>

- User input errors - Field errors

<strong>Input validations communicate:</strong>

- Fields that have been left blank
- Fields that were filled in with an incorrect format
- Selection controls that have been left unselected

### Toast
<img src={componentToast} className="img-padding" alt="Error toast sample for data retrieving failure." width="640" />

<strong>Use for:</strong>

- User action errors
- Application errors

<strong>Toasts communicate:</strong>

- Concise and easily understandable error messages, which are not caused by the user, such as a connection failure, server issues, etc.
- Toast error messages typically occur as a consequence of a user's action.
- Error toast messages should not have a timeout property, use a standard dismissible toast instead.

### 404-page / error page
<img src={componentErrorPage} className="img-padding" alt="Error page samples for unauthorised access and down for maintenance page." />

<strong>Use for:</strong>

- Security restriction errors
- Application errors
- Global errors

<strong>Error pages communicate:</strong>

- That the requested page or resource cannot be found on the server.
- An issue with the server, preventing it from fulfilling the request.
- Server is temporarily unable to handle the request due to maintenance, overloading, or other server-related issues.
- User does not have the necessary permissions to access the requested resource.
